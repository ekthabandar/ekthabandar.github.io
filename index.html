<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CalcBharat ‚Äì India's Calculator Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --saffron: #FF6B00;
  --saffron-light: #FF8C33;
  --green: #00A550;
  --green-dark: #007A3D;
  --navy: #0A0F2E;
  --navy2: #12193D;
  --card: #161D40;
  --card2: #1E2650;
  --text: #E8EAF6;
  --muted: #8892B0;
  --white: #ffffff;
  --border: rgba(255,107,0,0.15);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: 'DM Sans', sans-serif;
  background: var(--navy);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}
/* BG texture */
body::before {
  content: '';
  position: fixed; inset: 0;
  background: 
    radial-gradient(ellipse 80% 60% at 10% 10%, rgba(255,107,0,0.08) 0%, transparent 60%),
    radial-gradient(ellipse 60% 50% at 90% 80%, rgba(0,165,80,0.07) 0%, transparent 60%);
  pointer-events: none; z-index: 0;
}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
header {
  position: sticky; top: 0; z-index: 100;
  background: rgba(10,15,46,0.92);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
  padding: 0 clamp(1rem,5vw,4rem);
  display: flex; align-items: center; justify-content: space-between;
  height: 64px;
}
.logo { display: flex; align-items: center; gap: 10px; text-decoration: none; }
.logo-icon {
  width: 38px; height: 38px; border-radius: 10px;
  background: linear-gradient(135deg, var(--saffron), var(--green));
  display: grid; place-items: center; font-size: 20px;
}
.logo-text { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.3rem; color: var(--white); }
.logo-text span { color: var(--saffron); }

nav { display: flex; gap: 2rem; }
nav a { color: var(--muted); text-decoration: none; font-size: 0.9rem; transition: color .2s; }
nav a:hover { color: var(--saffron); }

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
.hero {
  position: relative; z-index: 1;
  text-align: center;
  padding: clamp(3rem,8vw,6rem) 1rem 2rem;
}
.hero-badge {
  display: inline-flex; align-items: center; gap: 6px;
  background: rgba(255,107,0,0.1); border: 1px solid rgba(255,107,0,0.3);
  border-radius: 100px; padding: 4px 14px; font-size: 0.8rem;
  color: var(--saffron); margin-bottom: 1.5rem;
}
.hero h1 {
  font-family: 'Syne', sans-serif; font-weight: 800;
  font-size: clamp(2rem,6vw,4rem); line-height: 1.1;
  color: var(--white); margin-bottom: 1rem;
}
.hero h1 em { color: var(--saffron); font-style: normal; }
.hero p { color: var(--muted); font-size: 1.1rem; max-width: 560px; margin: 0 auto 2rem; }

/* Search */
.search-wrap { max-width: 500px; margin: 0 auto 1rem; position: relative; }
.search-wrap input {
  width: 100%; padding: 14px 50px 14px 20px;
  background: var(--card); border: 1px solid var(--border);
  border-radius: 12px; color: var(--white); font-size: 1rem;
  outline: none; font-family: inherit; transition: border .2s;
}
.search-wrap input:focus { border-color: var(--saffron); }
.search-wrap input::placeholder { color: var(--muted); }
.search-icon { position: absolute; right: 16px; top: 50%; transform: translateY(-50%); color: var(--muted); pointer-events: none; }

/* ‚îÄ‚îÄ CATEGORIES ‚îÄ‚îÄ */
.section { position: relative; z-index: 1; padding: 2rem clamp(1rem,5vw,4rem); }
.section-title {
  font-family: 'Syne', sans-serif; font-weight: 700; font-size: 1.4rem;
  margin-bottom: 1.25rem; display: flex; align-items: center; gap: 10px;
}
.section-title::after {
  content: ''; flex: 1; height: 1px; background: var(--border);
}

/* Filter chips */
.chips { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 2rem; }
.chip {
  padding: 6px 16px; border-radius: 100px; font-size: 0.85rem; cursor: pointer;
  border: 1px solid var(--border); background: transparent; color: var(--muted);
  transition: all .2s; white-space: nowrap;
}
.chip:hover, .chip.active { background: var(--saffron); border-color: var(--saffron); color: #fff; }

/* Grid */
.calc-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1rem;
}
.calc-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px; padding: 1.5rem;
  cursor: pointer; transition: all .25s;
  position: relative; overflow: hidden;
}
.calc-card::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,107,0,0.05), transparent);
  opacity: 0; transition: opacity .25s;
}
.calc-card:hover { transform: translateY(-3px); border-color: rgba(255,107,0,0.4); box-shadow: 0 12px 40px rgba(0,0,0,0.3); }
.calc-card:hover::before { opacity: 1; }
.card-icon {
  width: 48px; height: 48px; border-radius: 12px; display: grid; place-items: center;
  font-size: 22px; margin-bottom: 1rem;
}
.calc-card h3 { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 1rem; margin-bottom: 6px; }
.calc-card p { color: var(--muted); font-size: 0.82rem; line-height: 1.5; }
.card-tag {
  display: inline-block; margin-top: 10px; padding: 2px 10px;
  border-radius: 100px; font-size: 0.72rem; font-weight: 500;
}

/* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
.modal-overlay {
  position: fixed; inset: 0; z-index: 200;
  background: rgba(5,8,20,0.85); backdrop-filter: blur(8px);
  display: none; align-items: center; justify-content: center; padding: 1rem;
}
.modal-overlay.open { display: flex; }
.modal {
  background: var(--card2); border: 1px solid var(--border);
  border-radius: 20px; width: 100%; max-width: 680px; max-height: 90vh;
  overflow-y: auto; position: relative; animation: slideUp .3s ease;
}
@keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.modal-header {
  padding: 1.5rem 1.5rem 1rem;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between; gap: 1rem;
  position: sticky; top: 0; background: var(--card2); z-index: 10; border-radius: 20px 20px 0 0;
}
.modal-header h2 { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 1.3rem; }
.modal-close { background: none; border: none; color: var(--muted); cursor: pointer; font-size: 1.4rem; padding: 4px; line-height: 1; }
.modal-close:hover { color: var(--white); }
.modal-body { padding: 1.5rem; }

/* Form */
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
@media(max-width:500px) { .form-grid { grid-template-columns: 1fr; } }
.form-group { display: flex; flex-direction: column; gap: 6px; }
.form-group label { font-size: 0.82rem; color: var(--muted); font-weight: 500; }
.form-group input, .form-group select {
  background: var(--navy); border: 1px solid var(--border);
  border-radius: 10px; padding: 10px 14px; color: var(--white);
  font-size: 0.95rem; font-family: inherit; outline: none; transition: border .2s;
}
.form-group input:focus, .form-group select:focus { border-color: var(--saffron); }
.form-group input::placeholder { color: var(--muted); }
.form-group select option { background: var(--navy2); }

.calc-btn {
  width: 100%; margin-top: 1.25rem; padding: 13px;
  background: linear-gradient(135deg, var(--saffron), var(--saffron-light));
  border: none; border-radius: 12px; color: #fff;
  font-family: 'Syne', sans-serif; font-weight: 700; font-size: 1rem;
  cursor: pointer; transition: opacity .2s;
}
.calc-btn:hover { opacity: 0.9; }

/* Result */
.result-box {
  margin-top: 1.25rem; padding: 1.25rem;
  background: var(--navy); border: 1px solid rgba(0,165,80,0.25);
  border-radius: 14px; display: none;
}
.result-box.show { display: block; }
.result-title { font-size: 0.8rem; color: var(--muted); margin-bottom: 0.5rem; }
.result-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px,1fr)); gap: 1rem; margin-top: 0.5rem; }
.result-item { text-align: center; }
.result-item .label { font-size: 0.78rem; color: var(--muted); margin-bottom: 4px; }
.result-item .value { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 1.4rem; color: var(--green); }
.result-item .value.accent { color: var(--saffron); }
.result-item .value.white { color: var(--white); }

/* Divider */
.result-divider { border: none; border-top: 1px solid var(--border); margin: 1rem 0; }

/* Range */
.range-wrap { display: flex; flex-direction: column; gap: 4px; }
.range-row { display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--muted); }
input[type=range] {
  -webkit-appearance: none; width: 100%; height: 4px;
  background: var(--border); border-radius: 2px; outline: none;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none; width: 18px; height: 18px;
  background: var(--saffron); border-radius: 50%; cursor: pointer;
}

/* FOOTER */
footer {
  position: relative; z-index: 1; text-align: center;
  padding: 3rem 1rem 2rem; color: var(--muted); font-size: 0.85rem;
  border-top: 1px solid var(--border); margin-top: 3rem;
}
footer strong { color: var(--saffron); }

/* ‚îÄ‚îÄ Colors per category ‚îÄ‚îÄ */
.color-invest { background: rgba(0,165,80,0.15); }
.color-invest .card-icon { background: rgba(0,165,80,0.2); }
.color-invest .card-tag { background: rgba(0,165,80,0.15); color: var(--green); }

.color-loan { background: rgba(255,107,0,0.08); }
.color-loan .card-icon { background: rgba(255,107,0,0.15); }
.color-loan .card-tag { background: rgba(255,107,0,0.15); color: var(--saffron); }

.color-tax { background: rgba(90,120,255,0.08); }
.color-tax .card-icon { background: rgba(90,120,255,0.15); }
.color-tax .card-tag { background: rgba(90,120,255,0.15); color: #7D9AFF; }

.color-saving { background: rgba(220,160,0,0.08); }
.color-saving .card-icon { background: rgba(220,160,0,0.15); }
.color-saving .card-tag { background: rgba(220,160,0,0.15); color: #FFD047; }

.color-general { background: rgba(180,100,255,0.08); }
.color-general .card-icon { background: rgba(180,100,255,0.15); }
.color-general .card-tag { background: rgba(180,100,255,0.15); color: #C080FF; }

/* hidden */
.hidden { display: none; }

@media(max-width:600px) {
  nav { display: none; }
}
</style>
</head>
<body>

<header>
  <a class="logo" href="#">
    <div class="logo-icon">üáÆüá≥</div>
    <div class="logo-text">Calc<span>Bharat</span></div>
  </a>
  <nav>
    <a href="#">Investment</a>
    <a href="#">Loans</a>
    <a href="#">Tax</a>
    <a href="#">Savings</a>
  </nav>
</header>

<div class="hero">
  <div class="hero-badge">üéØ India's #1 Financial Calculator Hub</div>
  <h1>All Indian Calculators<br><em>One Place</em></h1>
  <p>Free, accurate financial calculators in ‚ÇπINR ‚Äî EMI, SIP, Tax, PPF, FD and 15+ more.</p>
  <div class="search-wrap">
    <input type="text" id="searchInput" placeholder="Search calculators‚Ä¶ e.g. SIP, EMI, GST" oninput="filterCalcs()">
    <span class="search-icon">üîç</span>
  </div>
</div>

<div class="section">
  <div class="chips">
    <button class="chip active" onclick="filterChip(this,'all')">All</button>
    <button class="chip" onclick="filterChip(this,'invest')">üìà Investment</button>
    <button class="chip" onclick="filterChip(this,'loan')">üè† Loans & EMI</button>
    <button class="chip" onclick="filterChip(this,'tax')">üßæ Tax</button>
    <button class="chip" onclick="filterChip(this,'saving')">üí∞ Savings</button>
    <button class="chip" onclick="filterChip(this,'general')">üî¢ General</button>
  </div>

  <div class="calc-grid" id="calcGrid">
  <!-- Cards injected by JS -->
  </div>
</div>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
  <div class="modal">
    <div class="modal-header">
      <h2 id="modalTitle"></h2>
      <button class="modal-close" onclick="closeModalDirect()">‚úï</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<footer>
  <p>Made with ‚ù§Ô∏è for <strong>Bharat</strong> ¬∑ All calculations are indicative ¬∑ Not financial advice</p>
  <p style="margin-top:6px;font-size:0.75rem;">¬© 2024 CalcBharat ¬∑ Free to use</p>
</footer>

<script>
// ‚îÄ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const calculators = [
  { id:'sip', name:'SIP Calculator', desc:'Calculate returns on your monthly Systematic Investment Plan.', icon:'üìà', cat:'invest', tag:'Investment' },
  { id:'lumpsum', name:'Lumpsum Calculator', desc:'One-time investment growth at expected rate over time.', icon:'üíπ', cat:'invest', tag:'Investment' },
  { id:'swp', name:'SWP Calculator', desc:'Systematic Withdrawal Plan ‚Äî how long your corpus lasts.', icon:'üîÑ', cat:'invest', tag:'Investment' },
  { id:'mf', name:'Mutual Fund Returns', desc:'Estimate Mutual Fund returns based on NAV & time period.', icon:'üè¶', cat:'invest', tag:'Investment' },
  { id:'xirr', name:'XIRR Calculator', desc:'Calculate annualised return on irregular cashflows.', icon:'üìä', cat:'invest', tag:'Investment' },
  { id:'ssy', name:'Sukanya Samriddhi Yojana', desc:'SSY scheme corpus & interest calculator for girl child.', icon:'üëß', cat:'saving', tag:'Savings' },
  { id:'ppf', name:'PPF Calculator', desc:'Public Provident Fund maturity & interest calculator.', icon:'üèõÔ∏è', cat:'saving', tag:'Savings' },
  { id:'epf', name:'EPF Calculator', desc:'Employee Provident Fund corpus at retirement.', icon:'üë∑', cat:'saving', tag:'Savings' },
  { id:'fd', name:'FD Calculator', desc:'Fixed Deposit maturity amount & interest earned.', icon:'üèß', cat:'saving', tag:'Savings' },
  { id:'rd', name:'RD Calculator', desc:'Recurring Deposit maturity with monthly contribution.', icon:'üìÖ', cat:'saving', tag:'Savings' },
  { id:'income_tax', name:'Income Tax Calculator', desc:'FY 2024-25 income tax under old & new regime.', icon:'üßæ', cat:'tax', tag:'Tax' },
  { id:'gst', name:'GST Calculator', desc:'Add or remove GST from any amount ‚Äî 5%, 12%, 18%, 28%.', icon:'üìã', cat:'tax', tag:'Tax' },
  { id:'home_emi', name:'Home Loan EMI', desc:'Monthly EMI for home loans with amortisation breakdown.', icon:'üè†', cat:'loan', tag:'Loan' },
  { id:'personal_emi', name:'Personal Loan EMI', desc:'Quick EMI calculator for personal loans.', icon:'üë§', cat:'loan', tag:'Loan' },
  { id:'car_emi', name:'Car Loan EMI', desc:'Calculate car loan EMI, total interest & cost.', icon:'üöó', cat:'loan', tag:'Loan' },
  { id:'sbi_emi', name:'SBI Loan EMI', desc:'SBI home/personal/car loan EMI at current SBI rates.', icon:'üè™', cat:'loan', tag:'Loan' },
  { id:'age', name:'Age Calculator', desc:'Calculate exact age in years, months & days.', icon:'üéÇ', cat:'general', tag:'General' },
];

// ‚îÄ‚îÄ‚îÄ RENDER CARDS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function catClass(cat) {
  return { invest:'color-invest', loan:'color-loan', tax:'color-tax', saving:'color-saving', general:'color-general' }[cat] || 'color-invest';
}

function renderCards(list) {
  const grid = document.getElementById('calcGrid');
  grid.innerHTML = list.map(c => `
    <div class="calc-card ${catClass(c.cat)}" onclick="openCalc('${c.id}')">
      <div class="card-icon">${c.icon}</div>
      <h3>${c.name}</h3>
      <p>${c.desc}</p>
      <span class="card-tag">${c.tag}</span>
    </div>
  `).join('');
}
renderCards(calculators);

let activeChip = 'all';

function filterChip(el, cat) {
  document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
  el.classList.add('active');
  activeChip = cat;
  applyFilter();
}
function filterCalcs() { applyFilter(); }
function applyFilter() {
  const q = document.getElementById('searchInput').value.toLowerCase();
  let list = calculators;
  if (activeChip !== 'all') list = list.filter(c=>c.cat===activeChip);
  if (q) list = list.filter(c=>c.name.toLowerCase().includes(q)||c.desc.toLowerCase().includes(q));
  renderCards(list);
}

// ‚îÄ‚îÄ‚îÄ FORMAT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const fmt = n => '‚Çπ' + Math.round(n).toLocaleString('en-IN');

// ‚îÄ‚îÄ‚îÄ CALCULATOR CONFIGS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const calcs = {

  sip: {
    title: 'SIP Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Monthly Investment (‚Çπ)</label><input id="sip_amt" type="number" value="5000" placeholder="5000"></div>
        <div class="form-group"><label>Expected Annual Return (%)</label><input id="sip_rate" type="number" value="12" step="0.1"></div>
        <div class="form-group"><label>Investment Duration (Years)</label><input id="sip_yrs" type="number" value="10"></div>
      </div>
      <button class="calc-btn" onclick="calcSIP()">Calculate Returns</button>
      <div class="result-box" id="sip_res"></div>`,
    calc: () => {
      const P=+v('sip_amt'), r=+v('sip_rate')/12/100, n=+v('sip_yrs')*12;
      const fv = P*((Math.pow(1+r,n)-1)/r)*(1+r);
      const inv = P*n;
      showResult('sip_res',[
        {label:'Total Invested',val:fmt(inv),cls:'white'},
        {label:'Est. Returns',val:fmt(fv-inv),cls:'accent'},
        {label:'Maturity Value',val:fmt(fv),cls:''},
      ]);
    }
  },

  lumpsum: {
    title: 'Lumpsum Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Investment Amount (‚Çπ)</label><input id="ls_amt" type="number" value="100000"></div>
        <div class="form-group"><label>Expected Annual Return (%)</label><input id="ls_rate" type="number" value="12" step="0.1"></div>
        <div class="form-group"><label>Duration (Years)</label><input id="ls_yrs" type="number" value="10"></div>
      </div>
      <button class="calc-btn" onclick="calcLS()">Calculate</button>
      <div class="result-box" id="ls_res"></div>`,
    calc: () => {
      const P=+v('ls_amt'), r=+v('ls_rate')/100, n=+v('ls_yrs');
      const fv = P*Math.pow(1+r,n);
      showResult('ls_res',[
        {label:'Invested',val:fmt(P),cls:'white'},
        {label:'Gains',val:fmt(fv-P),cls:'accent'},
        {label:'Maturity Value',val:fmt(fv),cls:''},
      ]);
    }
  },

  swp: {
    title: 'SWP Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Initial Investment (‚Çπ)</label><input id="swp_corp" type="number" value="1000000"></div>
        <div class="form-group"><label>Monthly Withdrawal (‚Çπ)</label><input id="swp_wd" type="number" value="10000"></div>
        <div class="form-group"><label>Annual Return Rate (%)</label><input id="swp_rate" type="number" value="8" step="0.1"></div>
        <div class="form-group"><label>Duration (Years)</label><input id="swp_yrs" type="number" value="10"></div>
      </div>
      <button class="calc-btn" onclick="calcSWP()">Calculate</button>
      <div class="result-box" id="swp_res"></div>`,
    calc: () => {
      const P=+v('swp_corp'), W=+v('swp_wd'), r=+v('swp_rate')/12/100, n=+v('swp_yrs')*12;
      let corpus=P;
      for(let i=0;i<n;i++){corpus=corpus*(1+r)-W;}
      const totalWd=W*n;
      showResult('swp_res',[
        {label:'Total Withdrawn',val:fmt(totalWd),cls:'accent'},
        {label:'Remaining Corpus',val:fmt(Math.max(corpus,0)),cls:''},
        {label:'Corpus Exhausted?',val:corpus<0?'Yes ‚ö†Ô∏è':'No ‚úÖ',cls:corpus<0?'accent':'white'},
      ]);
    }
  },

  mf: {
    title: 'Mutual Fund Returns Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Investment Amount (‚Çπ)</label><input id="mf_amt" type="number" value="100000"></div>
        <div class="form-group"><label>Purchase NAV (‚Çπ)</label><input id="mf_bnav" type="number" value="25" step="0.01"></div>
        <div class="form-group"><label>Current NAV (‚Çπ)</label><input id="mf_cnav" type="number" value="45" step="0.01"></div>
        <div class="form-group"><label>Investment Period (Years)</label><input id="mf_yrs" type="number" value="3" step="0.5"></div>
      </div>
      <button class="calc-btn" onclick="calcMF()">Calculate Returns</button>
      <div class="result-box" id="mf_res"></div>`,
    calc: () => {
      const amt=+v('mf_amt'), bn=+v('mf_bnav'), cn=+v('mf_cnav'), yrs=+v('mf_yrs');
      const units=amt/bn, curr=units*cn;
      const absReturn=(cn-bn)/bn*100;
      const cagr=(Math.pow(cn/bn,1/yrs)-1)*100;
      showResult('mf_res',[
        {label:'Current Value',val:fmt(curr),cls:''},
        {label:'Profit/Loss',val:fmt(curr-amt),cls:'accent'},
        {label:'Absolute Return',val:absReturn.toFixed(2)+'%',cls:'white'},
        {label:'CAGR',val:cagr.toFixed(2)+'%',cls:''},
      ]);
    }
  },

  xirr: {
    title: 'XIRR Calculator',
    render: () => `
      <p style="color:var(--muted);font-size:.85rem;margin-bottom:1rem;">Enter cashflows as comma-separated values (negative = investment, positive = return)</p>
      <div class="form-group" style="margin-bottom:1rem"><label>Cashflows (‚Çπ) e.g. -10000,-10000,25000</label><input id="xirr_cf" type="text" value="-10000,-10000,-10000,35000" placeholder="-10000,-10000,35000"></div>
      <div class="form-group" style="margin-bottom:1rem"><label>Dates (DD/MM/YYYY) ‚Äî same count as cashflows</label><input id="xirr_dt" type="text" value="01/01/2022,01/07/2022,01/01/2023,01/01/2024" placeholder="01/01/2022,01/07/2022,01/01/2023"></div>
      <button class="calc-btn" onclick="calcXIRR()">Calculate XIRR</button>
      <div class="result-box" id="xirr_res"></div>`,
    calc: () => {
      const cfs=v('xirr_cf').split(',').map(Number);
      const dts=v('xirr_dt').split(',').map(s=>{const[d,m,y]=s.trim().split('/');return new Date(y,m-1,d);});
      if(cfs.length!==dts.length){alert('Cashflows & dates count must match');return;}
      const d0=dts[0];
      function npv(rate){return cfs.reduce((s,cf,i)=>s+cf/Math.pow(1+rate,(dts[i]-d0)/365),0);}
      let lo=-0.999,hi=10,mid=0;
      for(let i=0;i<200;i++){mid=(lo+hi)/2;npv(mid)>0?lo=mid:hi=mid;}
      const rate=mid*100;
      showResult('xirr_res',[{label:'XIRR (Annualised Return)',val:rate.toFixed(2)+'%',cls:''}]);
    }
  },

  ssy: {
    title: 'Sukanya Samriddhi Yojana Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Annual Deposit (‚Çπ)</label><input id="ssy_dep" type="number" value="50000" min="250" max="150000"></div>
        <div class="form-group"><label>Girl's Current Age</label><input id="ssy_age" type="number" value="5" min="0" max="10"></div>
        <div class="form-group"><label>Interest Rate (%)</label><input id="ssy_rate" type="number" value="8.2" step="0.1"></div>
      </div>
      <p style="color:var(--muted);font-size:.78rem;margin-top:.5rem;">Deposits for 15 years, matures at age 21. Current SSY rate: 8.2% p.a.</p>
      <button class="calc-btn" onclick="calcSSY()">Calculate Maturity</button>
      <div class="result-box" id="ssy_res"></div>`,
    calc: () => {
      const dep=+v('ssy_dep'), age=+v('ssy_age'), rate=+v('ssy_rate')/100;
      const depositYears=15, maturityAge=21;
      let balance=0;
      for(let yr=1;yr<=depositYears;yr++){balance=(balance+dep)*(1+rate);}
      const remainYears=Math.max(0,maturityAge-age-depositYears);
      for(let yr=0;yr<remainYears;yr++){balance*=(1+rate);}
      showResult('ssy_res',[
        {label:'Total Deposited',val:fmt(dep*depositYears),cls:'white'},
        {label:'Interest Earned',val:fmt(balance-dep*depositYears),cls:'accent'},
        {label:'Maturity Amount',val:fmt(balance),cls:''},
      ]);
    }
  },

  ppf: {
    title: 'PPF Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Yearly Investment (‚Çπ)</label><input id="ppf_dep" type="number" value="150000" max="150000"></div>
        <div class="form-group"><label>Duration (Years)</label><input id="ppf_yrs" type="number" value="15" min="15"></div>
        <div class="form-group"><label>Interest Rate (%)</label><input id="ppf_rate" type="number" value="7.1" step="0.1"></div>
      </div>
      <button class="calc-btn" onclick="calcPPF()">Calculate</button>
      <div class="result-box" id="ppf_res"></div>`,
    calc: () => {
      const dep=+v('ppf_dep'), yrs=+v('ppf_yrs'), r=+v('ppf_rate')/100;
      let bal=0;
      for(let i=0;i<yrs;i++){bal=(bal+dep)*(1+r);}
      showResult('ppf_res',[
        {label:'Total Invested',val:fmt(dep*yrs),cls:'white'},
        {label:'Interest Earned',val:fmt(bal-dep*yrs),cls:'accent'},
        {label:'Maturity Amount',val:fmt(bal),cls:''},
      ]);
    }
  },

  epf: {
    title: 'EPF Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Basic + DA Monthly (‚Çπ)</label><input id="epf_sal" type="number" value="30000"></div>
        <div class="form-group"><label>Employee Contribution (%)</label><input id="epf_emp" type="number" value="12" step="0.5"></div>
        <div class="form-group"><label>Employer Contribution (%)</label><input id="epf_er" type="number" value="12" step="0.5"></div>
        <div class="form-group"><label>Years to Retirement</label><input id="epf_yrs" type="number" value="30"></div>
        <div class="form-group"><label>EPF Interest Rate (%)</label><input id="epf_rate" type="number" value="8.15" step="0.05"></div>
        <div class="form-group"><label>Annual Salary Growth (%)</label><input id="epf_grow" type="number" value="5" step="0.5"></div>
      </div>
      <button class="calc-btn" onclick="calcEPF()">Calculate EPF Corpus</button>
      <div class="result-box" id="epf_res"></div>`,
    calc: () => {
      let sal=+v('epf_sal'), empP=+v('epf_emp')/100, erP=+v('epf_er')/100;
      const yrs=+v('epf_yrs'), r=+v('epf_rate')/100, grow=+v('epf_grow')/100;
      let bal=0, totalContrib=0;
      for(let y=0;y<yrs;y++){
        const monthly=(sal*empP+sal*erP)*12;
        totalContrib+=monthly; bal=(bal+monthly)*(1+r); sal*=(1+grow);
      }
      showResult('epf_res',[
        {label:'Total Contribution',val:fmt(totalContrib),cls:'white'},
        {label:'Interest Earned',val:fmt(bal-totalContrib),cls:'accent'},
        {label:'EPF Corpus at Retirement',val:fmt(bal),cls:''},
      ]);
    }
  },

  fd: {
    title: 'Fixed Deposit Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Principal Amount (‚Çπ)</label><input id="fd_p" type="number" value="100000"></div>
        <div class="form-group"><label>Annual Interest Rate (%)</label><input id="fd_r" type="number" value="7" step="0.1"></div>
        <div class="form-group"><label>Duration (Years)</label><input id="fd_y" type="number" value="3" step="0.5"></div>
        <div class="form-group"><label>Compounding</label>
          <select id="fd_comp">
            <option value="1">Annual</option>
            <option value="2">Half-Yearly</option>
            <option value="4" selected>Quarterly</option>
            <option value="12">Monthly</option>
          </select>
        </div>
      </div>
      <button class="calc-btn" onclick="calcFD()">Calculate Maturity</button>
      <div class="result-box" id="fd_res"></div>`,
    calc: () => {
      const P=+v('fd_p'), r=+v('fd_r')/100, y=+v('fd_y'), n=+v('fd_comp');
      const A=P*Math.pow(1+r/n,n*y);
      showResult('fd_res',[
        {label:'Principal',val:fmt(P),cls:'white'},
        {label:'Interest Earned',val:fmt(A-P),cls:'accent'},
        {label:'Maturity Amount',val:fmt(A),cls:''},
      ]);
    }
  },

  rd: {
    title: 'Recurring Deposit Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Monthly Deposit (‚Çπ)</label><input id="rd_m" type="number" value="5000"></div>
        <div class="form-group"><label>Annual Interest Rate (%)</label><input id="rd_r" type="number" value="6.5" step="0.1"></div>
        <div class="form-group"><label>Duration (Months)</label><input id="rd_mo" type="number" value="36"></div>
      </div>
      <button class="calc-btn" onclick="calcRD()">Calculate</button>
      <div class="result-box" id="rd_res"></div>`,
    calc: () => {
      const M=+v('rd_m'), r=+v('rd_r')/100/4, n=+v('rd_mo');
      const A=M*((Math.pow(1+r,n/3)-1)/(1-(Math.pow(1+r,-1/3))));
      const inv=M*n;
      showResult('rd_res',[
        {label:'Total Invested',val:fmt(inv),cls:'white'},
        {label:'Interest Earned',val:fmt(A-inv),cls:'accent'},
        {label:'Maturity Amount',val:fmt(A),cls:''},
      ]);
    }
  },

  income_tax: {
    title: 'Income Tax Calculator (FY 2024-25)',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Annual Income (‚Çπ)</label><input id="tax_inc" type="number" value="800000"></div>
        <div class="form-group"><label>Regime</label>
          <select id="tax_reg">
            <option value="new" selected>New Regime</option>
            <option value="old">Old Regime</option>
          </select>
        </div>
        <div class="form-group"><label>Section 80C Deductions (‚Çπ)</label><input id="tax_80c" type="number" value="150000"></div>
        <div class="form-group"><label>HRA Exemption (‚Çπ)</label><input id="tax_hra" type="number" value="0"></div>
        <div class="form-group"><label>Other Deductions (‚Çπ)</label><input id="tax_other" type="number" value="0"></div>
      </div>
      <p style="color:var(--muted);font-size:.78rem;margin-top:.5rem;">New regime: Standard deduction ‚Çπ75,000. Old regime deductions applied for 80C etc.</p>
      <button class="calc-btn" onclick="calcTax()">Calculate Tax</button>
      <div class="result-box" id="tax_res"></div>`,
    calc: () => {
      const inc=+v('tax_inc'), reg=v('tax_reg');
      const c80=Math.min(+v('tax_80c'),150000), hra=+v('tax_hra'), oth=+v('tax_other');
      let taxable;
      if(reg==='new'){
        taxable=Math.max(0,inc-75000); // std deduction 75k
      } else {
        taxable=Math.max(0,inc-50000-c80-hra-oth);
      }
      function slabs(ti, slabRates){
        let tax=0;
        for(const [limit,rate] of slabRates){
          if(ti<=0) break;
          const chunk=limit===Infinity?ti:Math.min(ti,limit);
          tax+=chunk*rate; ti-=chunk;
        }
        return tax;
      }
      let tax;
      if(reg==='new'){
        if(taxable<=300000) tax=0;
        else tax=slabs(taxable,[[300000,0],[300000,.05],[300000,.1],[300000,.15],[300000,.2],[Infinity,.3]]);
        if(taxable<=700000) tax=Math.max(0,tax-(tax>0?tax:0)); // rebate 87A
        if(taxable<=700000) tax=0;
      } else {
        if(taxable<=250000) tax=0;
        else tax=slabs(taxable,[[250000,0],[250000,.05],[500000,.2],[Infinity,.3]]);
        if(taxable<=500000) tax=0; // rebate 87A old
      }
      const cess=tax*0.04;
      showResult('tax_res',[
        {label:'Taxable Income',val:fmt(taxable),cls:'white'},
        {label:'Income Tax',val:fmt(tax),cls:'accent'},
        {label:'Cess (4%)',val:fmt(cess),cls:'white'},
        {label:'Total Tax Payable',val:fmt(tax+cess),cls:''},
        {label:'Effective Rate',val:((tax+cess)/inc*100).toFixed(2)+'%',cls:'white'},
      ]);
    }
  },

  gst: {
    title: 'GST Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Amount (‚Çπ)</label><input id="gst_amt" type="number" value="10000"></div>
        <div class="form-group"><label>GST Rate (%)</label>
          <select id="gst_rate">
            <option value="5">5%</option>
            <option value="12">12%</option>
            <option value="18" selected>18%</option>
            <option value="28">28%</option>
          </select>
        </div>
        <div class="form-group"><label>Calculation Type</label>
          <select id="gst_type">
            <option value="add">Add GST (Excl ‚Üí Incl)</option>
            <option value="remove">Remove GST (Incl ‚Üí Excl)</option>
          </select>
        </div>
      </div>
      <button class="calc-btn" onclick="calcGST()">Calculate GST</button>
      <div class="result-box" id="gst_res"></div>`,
    calc: () => {
      const amt=+v('gst_amt'), rate=+v('gst_rate')/100, type=v('gst_type');
      let gstAmt, pre, total;
      if(type==='add'){ pre=amt; gstAmt=amt*rate; total=amt+gstAmt; }
      else { total=amt; pre=amt/(1+rate); gstAmt=total-pre; }
      const half=gstAmt/2;
      showResult('gst_res',[
        {label:'Base Amount',val:fmt(pre),cls:'white'},
        {label:'CGST ('+(rate*50).toFixed(0)+'%)',val:fmt(half),cls:'white'},
        {label:'SGST ('+(rate*50).toFixed(0)+'%)',val:fmt(half),cls:'white'},
        {label:'Total GST',val:fmt(gstAmt),cls:'accent'},
        {label:'Total Amount',val:fmt(total),cls:''},
      ]);
    }
  },

  home_emi: {
    title: 'Home Loan EMI Calculator',
    render: () => emiForm('home','Home Loan','8.5','30','5000000'),
    calc: () => calcEMI('home')
  },

  personal_emi: {
    title: 'Personal Loan EMI Calculator',
    render: () => emiForm('per','Personal Loan','12','5','500000'),
    calc: () => calcEMI('per')
  },

  car_emi: {
    title: 'Car Loan EMI Calculator',
    render: () => emiForm('car','Car Loan','9','7','800000'),
    calc: () => calcEMI('car')
  },

  sbi_emi: {
    title: 'SBI Loan EMI Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Loan Type</label>
          <select id="sbi_type" onchange="setSBIRate()">
            <option value="8.5">Home Loan (8.50%)</option>
            <option value="10.5">Personal Loan (10.50%)</option>
            <option value="9.15">Car Loan (9.15%)</option>
          </select>
        </div>
        <div class="form-group"><label>Loan Amount (‚Çπ)</label><input id="sbi_amt" type="number" value="3000000"></div>
        <div class="form-group"><label>Interest Rate (%) <small style="color:var(--saffron)">(auto)</small></label><input id="sbi_rate" type="number" value="8.5" step="0.05"></div>
        <div class="form-group"><label>Tenure (Years)</label><input id="sbi_yrs" type="number" value="20"></div>
      </div>
      <button class="calc-btn" onclick="calcSBIEMI()">Calculate EMI</button>
      <div class="result-box" id="sbi_res"></div>`,
    calc: () => {}
  },

  age: {
    title: 'Age Calculator',
    render: () => `
      <div class="form-grid">
        <div class="form-group"><label>Date of Birth</label><input id="age_dob" type="date" value="1990-06-15"></div>
        <div class="form-group"><label>Calculate Age On</label><input id="age_to" type="date" value="${new Date().toISOString().split('T')[0]}"></div>
      </div>
      <button class="calc-btn" onclick="calcAge()">Calculate Age</button>
      <div class="result-box" id="age_res"></div>`,
    calc: () => {
      const dob=new Date(v('age_dob')), to=new Date(v('age_to'));
      let yrs=to.getFullYear()-dob.getFullYear();
      let mos=to.getMonth()-dob.getMonth();
      let days=to.getDate()-dob.getDate();
      if(days<0){mos--;const prev=new Date(to.getFullYear(),to.getMonth(),0).getDate();days+=prev;}
      if(mos<0){yrs--;mos+=12;}
      const totalDays=Math.floor((to-dob)/86400000);
      showResult('age_res',[
        {label:'Years',val:yrs,cls:''},
        {label:'Months',val:mos,cls:'white'},
        {label:'Days',val:days,cls:'white'},
        {label:'Total Days',val:totalDays.toLocaleString('en-IN'),cls:'accent'},
      ]);
    }
  }
};

// ‚îÄ‚îÄ‚îÄ HELPERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function v(id){return document.getElementById(id)?.value;}

function showResult(id, items) {
  const box=document.getElementById(id);
  if(!box) return;
  box.className='result-box show';
  box.innerHTML=`<div class="result-title">üìä Calculation Result</div><div class="result-grid">`+
    items.map(i=>`<div class="result-item"><div class="label">${i.label}</div><div class="value ${i.cls||''}">${i.val}</div></div>`).join('')+
  `</div>`;
}

function emiForm(pre,lbl,rate,yrs,amt){
  return `<div class="form-grid">
    <div class="form-group"><label>Loan Amount (‚Çπ)</label><input id="${pre}_amt" type="number" value="${amt}"></div>
    <div class="form-group"><label>Interest Rate (% p.a.)</label><input id="${pre}_rate" type="number" value="${rate}" step="0.05"></div>
    <div class="form-group"><label>Loan Tenure (Years)</label><input id="${pre}_yrs" type="number" value="${yrs}"></div>
  </div>
  <button class="calc-btn" onclick="calcEMI('${pre}')">Calculate EMI</button>
  <div class="result-box" id="${pre}_res"></div>`;
}

function calcEMI(pre){
  const P=+v(pre+'_amt'), r=+v(pre+'_rate')/12/100, n=+v(pre+'_yrs')*12;
  const emi=P*r*Math.pow(1+r,n)/(Math.pow(1+r,n)-1);
  const total=emi*n;
  showResult(pre+'_res',[
    {label:'Monthly EMI',val:fmt(emi),cls:''},
    {label:'Total Interest',val:fmt(total-P),cls:'accent'},
    {label:'Total Amount',val:fmt(total),cls:'white'},
    {label:'Principal',val:fmt(P),cls:'white'},
  ]);
}

// ‚îÄ‚îÄ‚îÄ GLOBAL CALC FUNCS (referenced inline) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function calcSIP(){calcs.sip.calc();}
function calcLS(){calcs.lumpsum.calc();}
function calcSWP(){calcs.swp.calc();}
function calcMF(){calcs.mf.calc();}
function calcXIRR(){calcs.xirr.calc();}
function calcSSY(){calcs.ssy.calc();}
function calcPPF(){calcs.ppf.calc();}
function calcEPF(){calcs.epf.calc();}
function calcFD(){calcs.fd.calc();}
function calcRD(){calcs.rd.calc();}
function calcTax(){calcs.income_tax.calc();}
function calcGST(){calcs.gst.calc();}
function calcAge(){calcs.age.calc();}
function calcSBIEMI(){
  const P=+v('sbi_amt'), r=+v('sbi_rate')/12/100, n=+v('sbi_yrs')*12;
  const emi=P*r*Math.pow(1+r,n)/(Math.pow(1+r,n)-1);
  const total=emi*n;
  showResult('sbi_res',[
    {label:'Monthly EMI',val:fmt(emi),cls:''},
    {label:'Total Interest',val:fmt(total-P),cls:'accent'},
    {label:'Total Payment',val:fmt(total),cls:'white'},
  ]);
}
function setSBIRate(){
  const sel=document.getElementById('sbi_type');
  document.getElementById('sbi_rate').value=sel.value;
}

// ‚îÄ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function openCalc(id){
  const c=calcs[id]; if(!c) return;
  document.getElementById('modalTitle').textContent=c.title;
  document.getElementById('modalBody').innerHTML=c.render();
  document.getElementById('modalOverlay').classList.add('open');
}
function closeModal(e){if(e.target===document.getElementById('modalOverlay'))closeModalDirect();}
function closeModalDirect(){document.getElementById('modalOverlay').classList.remove('open');}
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeModalDirect();});
</script>
</body>
</html>
